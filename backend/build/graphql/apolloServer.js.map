{"version":3,"sources":["../../src/graphql/apolloServer.js"],"names":["server","development","process","env","NODE_ENV","ApolloServer","typeDefs","resolvers","context","req","res","cookies","at","accessToken","console","log","prisma","tracing","debug","introspection","playground","settings"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAG,SAATA,MAAS,GAAM;AACnB,MAAMC,WAAW,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7C;AAEA,SAAO,IAAIC,iCAAJ,CAAiB;AACtBC,IAAAA,QAAQ,EAARA,kBADsB;AAEtBC,IAAAA,SAAS,EAATA,qBAFsB;AAItBC,IAAAA,OAAO;AAAA,mGAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,gBAAAA,GAAT,QAASA,GAAT,EAAcC,GAAd,QAAcA,GAAd;AAGP,oBAAID,GAAG,IAAIA,GAAG,CAACE,OAAX,IAAsBF,GAAG,CAACE,OAAJ,CAAYC,EAAtC,EAA0CC,WAAW,GAAGJ,GAAG,CAACE,OAAJ,CAAYC,EAA1B;AAE1CE,gBAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BN,GAAG,CAACE,OAAJ,CAAYC,EAA3C;AALO,kDAOA;AAAEH,kBAAAA,GAAG,EAAHA,GAAF;AAAOC,kBAAAA,GAAG,EAAHA,GAAP;AAAYM,kBAAAA,MAAM,EAANA,kBAAZ;AAAoBH,kBAAAA,WAAW,EAAXA;AAApB,iBAPA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAF;;AAAA;AAAA;AAAA;;AAAA;AAAA,OAJe;AActBI,IAAAA,OAAO,EAAEhB,WAda;AAetBiB,IAAAA,KAAK,EAAEjB,WAfe;AAgBtBkB,IAAAA,aAAa,EAAElB,WAhBO;AAiBtBmB,IAAAA,UAAU,EAAEnB,WAAW,IAAI;AACzBoB,MAAAA,QAAQ,EAAE;AAAE,wBAAgB,OAAlB;AAA2B,+BAAuB;AAAlD;AADe;AAjBL,GAAjB,CAAP;AAqBD,CAxBD;;eA0BerB,M","sourcesContent":["import { ApolloServer } from 'apollo-server-express';\r\n\r\nimport prisma from '../prisma/prisma';\r\nimport typeDefs from './schema';\r\nimport resolvers from './resolvers';\r\n\r\nconst server = () => {\r\n  const development = process.env.NODE_ENV === 'development';\r\n\r\n  return new ApolloServer({\r\n    typeDefs,\r\n    resolvers,\r\n\r\n    context: async ({ req, res }) => {\r\n      let accessToken;\r\n\r\n      if (req && req.cookies && req.cookies.at) accessToken = req.cookies.at;\r\n\r\n      console.log('req.cookies.at:', req.cookies.at);\r\n\r\n      return { req, res, prisma, accessToken };\r\n    },\r\n\r\n    tracing: development,\r\n    debug: development,\r\n    introspection: development,\r\n    playground: development && {\r\n      settings: { 'editor.theme': 'light', 'request.credentials': 'include' }\r\n    }\r\n  });\r\n};\r\n\r\nexport default server;\r\n"],"file":"apolloServer.js"}